"use strict";!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):window[t]=e()}("basicContext",function(){var t=null,e=null,n="item",i="separator",o=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+t)},l=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=0===Object.keys(t).length;return e===!0&&(t.type=i),null==t.type&&(t.type=n),null==t["class"]&&(t["class"]=""),t.visible!==!1&&(t.visible=!0),null==t.icon&&(t.icon=null),null==t.title&&(t.title="Undefined"),t.disabled!==!0&&(t.disabled=!1),t.disabled===!0&&(t["class"]+=" basicContext__item--disabled"),!0},r=function(t,e){var o="",r="";return l(t)===!1?"":t.visible===!1?"":(t.num=e,null!==t.icon&&(r="<span class='basicContext__icon "+t.icon+"'></span>"),t.type===n?o="<tr class='basicContext__item "+t["class"]+"'><td class='basicContext__data' data-num='"+t.num+"'>"+r+t.title+"</td></tr>":t.type===i&&(o="<tr class='basicContext__item basicContext__item--separator'></tr>"),o)},c=function(t){var e="";return e+="<div class='basicContextContainer'><div class='basicContext'><table><tbody>",t.forEach(function(t,n){return e+=r(t,n)}),e+="</tbody></table></div></div>"},a=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==e.x||null==e.y)){var n=t.changedTouches;null!=n&&n.length>0&&(e.x=n[0].clientX,e.y=n[0].clientY)}return(null==e.x||e.x<0)&&(e.x=0),(null==e.y||e.y<0)&&(e.y=0),e},u=function(t,e){var n=a(t),i=n.x,o=n.y,l={width:window.innerWidth,height:window.innerHeight},r={width:e.offsetWidth,height:e.offsetHeight};i+r.width>l.width&&(i-=i+r.width-l.width),o+r.height>l.height&&(o-=o+r.height-l.height),r.height>l.height&&(o=0,e.classList.add("basicContext--scrollable"));var c=n.x-i,u=n.y-o;return{x:i,y:o,rx:c,ry:u}},s=function(t,e){if(void 0===t&&(t={}),t.visible===!1)return!1;if(t.disabled===!0)return!1;var n=function(n){"function"==typeof t.fn&&t.fn(n),y("basicContext:click",{clickevent:n,item:t,i:e})};return o("td[data-num='"+t.num+"']").onclick=n,o("td[data-num='"+t.num+"']").oncontextmenu=n,!0},d=function(n,i,l,r){e=i.target;var a=c(n);document.body.insertAdjacentHTML("beforeend",a),null==t&&(t=document.body.style.overflow,document.body.style.overflow="hidden");var d=o(),f=u(i,d);return d.style.left=f.x+"px",d.style.top=f.y+"px",d.style.transformOrigin=f.rx+"px "+f.ry+"px",d.style.opacity=1,null==l&&(l=h),d.parentElement.onclick=l,d.parentElement.oncontextmenu=l,n.forEach(s),"function"==typeof i.preventDefault&&i.preventDefault(),"function"==typeof i.stopPropagation&&i.stopPropagation(),"function"==typeof r&&r(),y("basicContext:show"),!0},f=function(){var t=o();return null!=t&&0!==t.length},h=function(){if(f()===!1)return!1;var e=document.querySelector(".basicContextContainer");return e.parentElement.removeChild(e),null!=t&&(document.body.style.overflow=t,t=null),y("basicContext:close"),!0},y=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=new CustomEvent(t,{detail:n,bubbles:!0});e.dispatchEvent(i)};return{ITEM:n,SEPARATOR:i,show:d,visible:f,close:h}});