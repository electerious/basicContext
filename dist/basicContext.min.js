"use strict";!function(t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):window[t]=n()}("basicContext",function(){var t=null,n="item",e="separator",i=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+t)},l=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=0===Object.keys(t).length;return i===!0&&(t.type=e),null==t.type&&(t.type=n),null==t["class"]&&(t["class"]=""),t.visible!==!1&&(t.visible=!0),null==t.icon&&(t.icon=null),null==t.title&&(t.title="Undefined"),t.disabled!==!0&&(t.disabled=!1),t.disabled===!0&&(t["class"]+=" basicContext__item--disabled"),null!=t.fn||t.type===e||t.disabled!==!1||(console.warn("Missing fn for item '"+t.title+"'"),!1)},o=function(t,i){var o="",a="";return l(t)===!1?"":t.visible===!1?"":(t.num=i,null!==t.icon&&(a="<span class='basicContext__icon "+t.icon+"'></span>"),t.type===n?o="\n\t\t       <tr class='basicContext__item "+t["class"]+"'>\n\t\t           <td class='basicContext__data' data-num='"+t.num+"'>"+a+t.title+"</td>\n\t\t       </tr>\n\t\t       ":t.type===e&&(o="\n\t\t       <tr class='basicContext__item basicContext__item--separator'></tr>\n\t\t       "),o)},a=function(t){var n="";return n+="\n\t\t\t<div class='basicContext'>\n\t            <table>\n\t                <tbody>\n\t        ",t.forEach(function(t,e){return n+=o(t,e)}),n+="\n\t\t\t\t\t</tbody>\n                </table>\n            </div>\n\t        "},r=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==n.x||null==n.y)){var e=t.changedTouches;null!=e&&e.length>0&&(n.x=e[0].clientX,n.y=e[0].clientY)}return(null==n.x||n.x<0)&&(n.x=0),(null==n.y||n.y<0)&&(n.y=0),n},s=function(t,n){var e=r(t),i=e.x,l=e.y,o={width:window.innerWidth,height:window.innerHeight},a={width:n.offsetWidth,height:n.offsetHeight};i+a.width>o.width&&(i-=i+a.width-o.width),l+a.height>o.height&&(l-=l+a.height-o.height),a.height>o.height&&(l=0,n.classList.add("basicContext--scrollable"));var s=e.x-i,c=e.y-l;return{x:i,y:l,rx:s,ry:c}},c=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return null!=t.fn&&(t.visible!==!1&&(t.disabled!==!0&&(i("td[data-num='"+t.num+"']").onclick=t.fn,i("td[data-num='"+t.num+"']").oncontextmenu=t.fn,!0)))},u=function(n,e,l,o){var r=a(n);document.body.insertAdjacentHTML("beforeend",r),null==t&&(t=document.body.style.overflow,document.body.style.overflow="hidden");var u=i(),d=s(e,u);return u.style.left=d.x+"px",u.style.top=d.y+"px",u.style.transformOrigin=d.rx+"px "+d.ry+"px",u.style.opacity=1,null==l&&(l=f),u.parentElement.onclick=l,u.parentElement.oncontextmenu=l,n.forEach(c),"function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation(),"function"==typeof o&&o(),!0},d=function(){var t=i();return null!=t&&0!==t.length},f=function(n){var e=document.querySelector(".basicContext");if(null!==e){var i=e.contains(n.target),l=n.target.parentElement.classList.value.indexOf("basicContext__item")>-1;i&&!l||e.parentElement.removeChild(e)}return null!=t&&(document.body.style.overflow=t,t=null),!0};return{ITEM:n,SEPARATOR:e,show:u,visible:d,close:f}});