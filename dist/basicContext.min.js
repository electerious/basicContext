"use strict";!function(t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):window[t]=n()}("basicContext",function(){var t="item",n="separator",e=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+t)},i=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=0===Object.keys(e).length;return i===!0&&(e.type=n),null==e.type&&(e.type=t),null==e["class"]&&(e["class"]=""),e.visible!==!1&&(e.visible=!0),null==e.icon&&(e.icon=null),null==e.title&&(e.title="Undefined"),e.disabled!==!0&&(e.disabled=!1),e.disabled===!0&&(e["class"]+=" basicContext__item--disabled"),null!=e.fn||e.type===n||e.disabled!==!1||(console.warn("Missing fn for item '"+e.title+"'"),!1)},l=function(e,l){var o="",a="";return i(e)===!1?"":e.visible===!1?"":(e.num=l,null!==e.icon&&(a="<span class='basicContext__icon "+e.icon+"'></span>"),e.type===t?o="\n\t\t       <tr class='basicContext__item "+e["class"]+"'>\n\t\t           <td class='basicContext__data' data-num='"+e.num+"'>"+a+e.title+"</td>\n\t\t       </tr>\n\t\t       ":e.type===n&&(o="\n\t\t       <tr class='basicContext__item basicContext__item--separator'></tr>\n\t\t       "),o)},o=function(t){var n="";return n+="\n\t\t\t<div class='basicContext'>\n\t            <table>\n\t                <tbody>\n\t        ",t.forEach(function(t,e){return n+=l(t,e)}),n+="\n\t\t\t\t\t</tbody>\n                </table>\n            </div>\n\t        "},a=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==n.x||null==n.y)){var e=t.changedTouches;null!=e&&e.length>0&&(n.x=e[0].clientX,n.y=e[0].clientY)}return(null==n.x||n.x<0)&&(n.x=0),(null==n.y||n.y<0)&&(n.y=0),n},r=function(t,n){var e=a(t),i=e.x,l=e.y,o={width:window.innerWidth,height:window.innerHeight},r={width:n.offsetWidth,height:n.offsetHeight};i+r.width>o.width&&(i-=i+r.width-o.width),l+r.height>o.height&&(l-=l+r.height-o.height),r.height>o.height&&(l=0,n.classList.add("basicContext--scrollable"));var s=e.x-i,c=e.y-l;return{x:i,y:l,rx:s,ry:c}},s=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return null!=t.fn&&(t.visible!==!1&&(t.disabled!==!0&&(e("td[data-num='"+t.num+"']").onclick=t.fn,e("td[data-num='"+t.num+"']").oncontextmenu=t.fn,!0)))},c=function(t,n,i,l){var a=o(t);document.body.insertAdjacentHTML("beforeend",a);var c=e(),u=r(n,c);return c.style.left=u.x+"px",c.style.top=u.y+"px",c.style.transformOrigin=u.rx+"px "+u.ry+"px",c.style.opacity=1,null==i&&(i=d),c.parentElement.onclick=i,c.parentElement.oncontextmenu=i,t.forEach(s),"function"==typeof n.preventDefault&&n.preventDefault(),"function"==typeof n.stopPropagation&&n.stopPropagation(),"function"==typeof l&&l(),!0},u=function(){var t=e();return null!=t&&0!==t.length},d=function(t){var n=document.querySelector(".basicContext");if(null!==n){var e=n.contains(t.target),i=t.target.parentElement.classList.value.indexOf("basicContext__item")>-1;e&&!i||n.parentElement.removeChild(n)}return!0};return{ITEM:t,SEPARATOR:n,show:c,visible:u,close:d}});